# 🔍 Supabase 数据库诊断

## 问题

API 返回 0 道题目，但你说数据库有数据。

## 可能的原因

### 1. `is_real_exam` 字段问题 ⭐ 最可能

代码中有这个过滤条件：
```typescript
.eq('is_real_exam', true)
```

**检查方法**：
1. 登录 Supabase → Table Editor
2. 打开 `vet_exam_questions` 表
3. 查看 `is_real_exam` 列的值

**如果值是 `false` 或 `null`**：
- 在 SQL Editor 运行：
  ```sql
  UPDATE vet_exam_questions 
  SET is_real_exam = true 
  WHERE is_real_exam IS NULL OR is_real_exam = false;
  ```

### 2. 科目名称不匹配

**前端发送的科目名**：
- `基础兽医学`
- `预防兽医学`  
- `临床兽医学`
- `综合应用`

**检查方法**：
1. 在 Table Editor 查看 `subject` 列
2. 确认值是否完全一致（包括空格）

**如果不一致**，修改数据：
```sql
-- 查看当前有哪些科目
SELECT DISTINCT subject FROM vet_exam_questions;

-- 如果需要修改，例如：
UPDATE vet_exam_questions 
SET subject = '基础兽医学' 
WHERE subject = '基础';
```

### 3. 表名问题

确认表名是 `vet_exam_questions`（不是 `exam_questions` 或其他）

---

## 🧪 快速测试 SQL

在 Supabase SQL Editor 运行：

```sql
-- 1. 查看表中有多少条数据
SELECT COUNT(*) as total FROM vet_exam_questions;

-- 2. 查看 is_real_exam 的分布
SELECT is_real_exam, COUNT(*) as count 
FROM vet_exam_questions 
GROUP BY is_real_exam;

-- 3. 查看科目分布
SELECT subject, COUNT(*) as count 
FROM vet_exam_questions 
GROUP BY subject;

-- 4. 查看符合查询条件的题目数量
SELECT subject, COUNT(*) as count 
FROM vet_exam_questions 
WHERE is_real_exam = true
GROUP BY subject;
```

---

## ✅ 快速修复

如果问题是 `is_real_exam` 字段，运行：

```sql
-- 将所有题目标记为真题
UPDATE vet_exam_questions 
SET is_real_exam = true;
```

然后重新测试网站！

---

**运行上面的 SQL 查询，告诉我结果！** 🔍
