# 添加更多病例到数据库

## 📦 新增病例列表

我已经创建了 `database/additional_cases.sql`，包含**12个新病例**：

### 难度1（基础病例）- 新增4个
1. 犬外耳炎（马拉色菌感染）
2. 猫上呼吸道感染综合征
3. 犬疫苗接种反应
4. 猫急性胃肠炎（饮食性）

### 难度2（中等病例）- 新增3个
5. 犬钩端螺旋体病
6. 猫甲状腺功能亢进
7. 犬传染性肝炎

### 难度3（进阶病例）- 新增2个
8. 犬糖尿病酮症酸中毒
9. 猫肥厚性心肌病

### 难度4-5（高级病例）- 新增3个
10. 犬艾迪生病
11. 猫淋巴瘤（难度4）
12. 犬免疫介导性溶血性贫血（难度5）

---

## 🔧 导入步骤

### 方法1：Supabase网页控制台（推荐）

1. **登录Supabase**
   - 访问：https://supabase.com
   - 登录您的账户

2. **打开SQL编辑器**
   - 左侧菜单：点击 **SQL Editor**
   - 点击 **New Query**

3. **复制粘贴SQL**
   - 打开文件：`database/additional_cases.sql`
   - 复制全部内容
   - 粘贴到SQL编辑器

4. **执行SQL**
   - 点击 **Run** 按钮（或按 Ctrl+Enter）
   - 等待执行完成

5. **验证结果**
   - 左侧菜单：点击 **Table Editor**
   - 选择 `case_templates` 表
   - 应该看到总共 **20个病例记录**

---

### 方法2：使用Supabase CLI（高级用户）

如果您已安装Supabase CLI：

```bash
# 连接到您的项目
supabase db push

# 或直接执行SQL文件
psql $DATABASE_URL -f database/additional_cases.sql
```

---

## 📊 导入后的病例分布

| 难度 | 病例数量 | 疾病列表 |
|------|---------|---------|
| 1 | 5个 | 猫癣、犬外耳炎、猫上呼吸道感染、犬疫苗反应、猫消化不良 |
| 2 | 6个 | 细小、猫瘟、尿道堵塞、钩端螺旋体、甲亢、犬肝炎 |
| 3 | 5个 | 胰腺炎、肾病、髋关节、糖尿病酮症、猫心肌病 |
| 4 | 3个 | 犬瘟、艾迪生病、猫淋巴瘤 |
| 5 | 1个 | 免疫介导性溶血性贫血 |

**总计：20个不同疾病的病例模板**

---

## ✅ 预期效果

导入后：
- ✅ 兽医学生（难度1）：可获取5个不同病例
- ✅ 实习医生（难度2）：可获取11个不同病例（难度1-2）
- ✅ 住院医师（难度3）：可获取16个不同病例（难度2-3）
- ✅ 专科医师（难度4）：可获取19个不同病例（难度3-4）
- ✅ 主任医师（难度5）：可获取全部20个病例

---

## 🎯 导入后需要做什么？

1. **验证数据**：在Table Editor查看记录数
2. **重启后端**：后端会自动使用新病例（如果已在运行则无需重启）
3. **测试多样性**：在前端多次点击"接诊下一位"
4. **观察日志**：后端控制台会显示去重后的病例数量

---

## 🔧 如果执行出错

### 错误：重复主键
如果提示ID冲突，添加 `ON CONFLICT DO NOTHING`：

```sql
INSERT INTO case_templates (...) 
VALUES (...)
ON CONFLICT (id) DO NOTHING;
```

### 错误：表不存在
确保先执行了 `schema.sql` 创建表

---

## 📝 未来扩展

您还可以继续添加更多病例：
- 骨科病例（骨折、脱位）
- 皮肤病（过敏性皮炎、蠕形螨）
- 眼科病例（青光眼、角膜溃疡）
- 神经病例（癫痫、椎间盘突出）

只需按照相同格式编写INSERT语句即可！
